<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>A-Frame Sphere Spawner - World Space</title>
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <style>
    body { margin: 0; overflow: hidden; }
    #ui {
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 999;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 20px;
      border-radius: 10px;
      font-family: Arial, sans-serif;
    }
    button {
      background: #4CAF50;
      color: white;
      border: none;
      padding: 10px 20px;
      margin: 5px 0;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      width: 100%;
    }
    button:hover {
      background: #45a049;
    }
    #info {
      margin-top: 10px;
      font-size: 12px;
      opacity: 0.8;
    }
  </style>
</head>
<body>

  <!-- UI Controls -->
  <div id="ui">
    <h3 style="margin-top: 0;">üåê Sphere Spawner</h3>
    <button onclick="spawnSphere()">Spawn Sphere</button>
    <button onclick="spawnRandom()">Spawn 5 Random</button>
    <button onclick="clearSpheres()">Clear All</button>
    <div id="info">
      <p>Spheres: <span id="count">0</span></p>
      <p><strong>Controls:</strong></p>
      <p>‚Ä¢ WASD: Move around</p>
      <p>‚Ä¢ Mouse: Look around</p>
      <p>‚Ä¢ Space: Spawn sphere</p>
    </div>
  </div>

  <!-- A-Frame Scene -->
  <a-scene>
    
    <!-- Camera with movement controls -->
    <a-entity id="rig" position="0 1.6 0">
      <a-camera 
        look-controls="pointerLockEnabled: false"
        wasd-controls="enabled: true; acceleration: 30">
      </a-camera>
    </a-entity>

    <!-- Lighting -->
    <a-light type="ambient" color="#888"></a-light>
    <a-light type="directional" position="2 4 -1" intensity="0.8"></a-light>
    <a-light type="point" position="-3 3 0" color="#4A90E2" intensity="0.5"></a-light>

    <!-- Ground plane for reference -->
    <a-plane 
      position="0 0 0" 
      rotation="-90 0 0" 
      width="50" 
      height="50" 
      color="#333"
      shadow="receive: true">
    </a-plane>

    <!-- Reference grid lines -->
    <a-entity id="grid" position="0 0.01 0">
      <a-box position="0 0 0" width="0.1" height="0.1" depth="0.1" color="#ff0000"></a-box>
      <a-box position="5 0 0" width="0.1" height="0.1" depth="0.1" color="#00ff00"></a-box>
      <a-box position="0 0 5" width="0.1" height="0.1" depth="0.1" color="#0000ff"></a-box>
    </a-entity>

    <!-- Container for spawned spheres (in world space) -->
    <a-entity id="sphere-container"></a-entity>

  </a-scene>

  <script>
    // Keep track of sphere count
    let sphereCount = 0;
    const container = document.querySelector('#sphere-container');
    const countDisplay = document.querySelector('#count');

    // Array of colors for variety
    const colors = [
      '#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A',
      '#98D8C8', '#F7DC6F', '#BB8FCE', '#85C1E2'
    ];

    // Get a random color
    function getRandomColor() {
      return colors[Math.floor(Math.random() * colors.length)];
    }

    // Get random position around camera
    function getRandomPosition() {
      const camera = document.querySelector('[camera]');
      const cameraPos = camera.object3D.position;
      
      // Random position within a radius around camera
      const distance = 2 + Math.random() * 5; // 2-7 units away
      const angle = Math.random() * Math.PI * 2; // Random angle
      const height = Math.random() * 4 - 1; // -1 to 3 height
      
      return {
        x: cameraPos.x + Math.cos(angle) * distance,
        y: height,
        z: cameraPos.z + Math.sin(angle) * distance
      };
    }

    // Spawn a sphere at a position
    function createSphere(position, radius = 0.3) {
      const sphere = document.createElement('a-sphere');
      sphere.setAttribute('position', `${position.x} ${position.y} ${position.z}`);
      sphere.setAttribute('radius', radius);
      sphere.setAttribute('color', getRandomColor());
      sphere.setAttribute('shadow', 'cast: true');
      
      // Optional: Add animation
      sphere.setAttribute('animation', {
        property: 'position',
        to: `${position.x} ${position.y + 0.2} ${position.z}`,
        dir: 'alternate',
        dur: 2000,
        loop: true,
        easing: 'easeInOutSine'
      });

      // Click to remove
      sphere.classList.add('clickable');
      sphere.addEventListener('click', function() {
        container.removeChild(sphere);
        sphereCount--;
        updateCount();
      });

      container.appendChild(sphere);
      sphereCount++;
      updateCount();
    }

    // Spawn single sphere
    function spawnSphere() {
      const pos = getRandomPosition();
      createSphere(pos);
    }

    // Spawn multiple random spheres
    function spawnRandom() {
      for (let i = 0; i < 5; i++) {
        setTimeout(() => {
          spawnSphere();
        }, i * 200); // Stagger spawns
      }
    }

    // Clear all spheres
    function clearSpheres() {
      while (container.firstChild) {
        container.removeChild(container.firstChild);
      }
      sphereCount = 0;
      updateCount();
    }

    // Update sphere count display
    function updateCount() {
      countDisplay.textContent = sphereCount;
    }

    // Keyboard controls
    document.addEventListener('keydown', function(event) {
      if (event.code === 'Space') {
        event.preventDefault();
        spawnSphere();
      }
    });

    // Spawn initial spheres for demo
    setTimeout(() => {
      for (let i = 0; i < 3; i++) {
        setTimeout(() => spawnSphere(), i * 300);
      }
    }, 1000);

  </script>

</body>
</html>
